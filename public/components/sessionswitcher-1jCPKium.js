import{r as l,j as e,q as f,s as k,t as D,c as p,d as E,u as T,T as $,P}from"../vendor-GUiPkHoX.js";const O=({sessions:i,activeSessionId:a,onSwitchSession:w,onCreateNewSession:j,onDeleteSession:g,isReady:m,peerError:b})=>{const[o,r]=l.useState(!1),[h,c]=l.useState(null),[N,u]=l.useState(!1),d=l.useRef(null),x=i.find(t=>t.id===a);l.useEffect(()=>{const t=s=>{d.current&&!d.current.contains(s.target)&&(r(!1),c(null))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const v=(t,s)=>{t.stopPropagation(),h===s?(g(s),c(null)):c(s)},y=t=>{t.stopPropagation(),navigator.clipboard.writeText(a),u(!0),setTimeout(()=>u(!1),2e3)};return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>r(!o),className:"flex-1 flex items-center justify-between gap-2 px-3 py-2 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-600 flex items-center justify-center shrink-0",children:e.jsx(f,{className:"w-3.5 h-3.5 text-white"})}),e.jsx(k,{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 ${b?"fill-red-500 text-red-500":m?"fill-green-500 text-green-500":"fill-yellow-500 text-yellow-500"}`})]}),e.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Your ID"}),e.jsx("span",{className:"text-sm text-slate-200 font-mono truncate max-w-[120px]",children:(x==null?void 0:x.name)||a})]})]}),e.jsx(D,{className:`w-4 h-4 text-slate-400 transition-transform ${o?"rotate-180":""}`})]}),e.jsx("button",{onClick:y,className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white",title:"Copy ID",children:N?e.jsx(p,{className:"w-4 h-4 text-green-500"}):e.jsx(E,{className:"w-4 h-4"})})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-150",children:[e.jsx("div",{className:"py-1 max-h-60 overflow-y-auto",children:i.map(t=>{const s=t.id===a,n=h===t.id;return e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 cursor-pointer transition-colors ${s?"bg-primary-600/20 text-white":"hover:bg-slate-800 text-slate-300"}`,onClick:()=>{n||(w(t.id),r(!1))},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center shrink-0 ${s?"bg-primary-600":"bg-slate-700"}`,children:s?e.jsx(p,{className:"w-3 h-3 text-white"}):e.jsx(f,{className:"w-3 h-3 text-slate-400"})}),e.jsx("span",{className:"font-mono text-sm truncate",children:t.name||t.id})]}),!s&&i.length>1&&e.jsx("button",{onClick:C=>v(C,t.id),className:`p-1 rounded transition-colors ${n?"bg-red-500/20 text-red-400":"hover:bg-slate-700 text-slate-500 hover:text-slate-300"}`,title:n?"Click again to confirm":"Delete session",children:n?e.jsx(T,{className:"w-3.5 h-3.5"}):e.jsx($,{className:"w-3.5 h-3.5"})})]},t.id)})}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{j(),r(!1)},disabled:!m,className:"w-full flex items-center gap-2 px-3 py-2.5 text-primary-400 hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"New Session"})]})})]})]})};export{O as S};
