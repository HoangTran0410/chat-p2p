import{r,j as e,t as h,u as g,a as N,v,T as y,P as k}from"../vendor-C-u55uKt.js";const D=({sessions:n,activeSessionId:i,onSwitchSession:u,onCreateNewSession:f,onDeleteSession:p,isReady:w})=>{const[o,a]=r.useState(!1),[x,c]=r.useState(null),d=r.useRef(null),m=n.find(t=>t.id===i);r.useEffect(()=>{const t=s=>{d.current&&!d.current.contains(s.target)&&(a(!1),c(null))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const j=(t,s)=>{t.stopPropagation(),x===s?(p(s),c(null)):c(s)};return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("button",{onClick:()=>a(!o),className:"w-full flex items-center justify-between gap-2 px-3 py-2 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-600 flex items-center justify-center shrink-0",children:e.jsx(h,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Session"}),e.jsx("span",{className:"text-sm text-slate-200 font-mono truncate max-w-[140px]",children:(m==null?void 0:m.name)||i})]})]}),e.jsx(g,{className:`w-4 h-4 text-slate-400 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-150",children:[e.jsx("div",{className:"py-1 max-h-60 overflow-y-auto",children:n.map(t=>{const s=t.id===i,l=x===t.id;return e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 cursor-pointer transition-colors ${s?"bg-primary-600/20 text-white":"hover:bg-slate-800 text-slate-300"}`,onClick:()=>{l||(u(t.id),a(!1))},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center shrink-0 ${s?"bg-primary-600":"bg-slate-700"}`,children:s?e.jsx(N,{className:"w-3 h-3 text-white"}):e.jsx(h,{className:"w-3 h-3 text-slate-400"})}),e.jsx("span",{className:"font-mono text-sm truncate",children:t.name||t.id})]}),!s&&n.length>1&&e.jsx("button",{onClick:b=>j(b,t.id),className:`p-1 rounded transition-colors ${l?"bg-red-500/20 text-red-400":"hover:bg-slate-700 text-slate-500 hover:text-slate-300"}`,title:l?"Click again to confirm":"Delete session",children:l?e.jsx(v,{className:"w-3.5 h-3.5"}):e.jsx(y,{className:"w-3.5 h-3.5"})})]},t.id)})}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{f(),a(!1)},disabled:!w,className:"w-full flex items-center gap-2 px-3 py-2.5 text-primary-400 hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"New Session"})]})})]})]})};export{D as S};
